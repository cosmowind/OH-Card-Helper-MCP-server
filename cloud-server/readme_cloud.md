# OHå¡æ¢ç´¢å·¥å…· - äº‘æœåŠ¡å™¨å®ç°æ–¹æ¡ˆ

## ğŸ¯ é¡¹ç›®ç›®æ ‡

å°†ç°æœ‰çš„NPX+FastMCPæ–¹æ¡ˆæ”¹é€ ä¸ºäº‘æœåŠ¡å™¨æ‰˜ç®¡æ–¹æ¡ˆï¼Œæ”¯æŒåœ¨MCP.soç­‰å¹³å°ä¸Šè¿›è¡Œæ‰˜ç®¡ï¼Œæä¾›REST APIæ¥å£å’Œå¤šç”¨æˆ·å¹¶å‘è®¿é—®ã€‚

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å½“å‰æ¶æ„ï¼ˆNPXæ–¹æ¡ˆï¼‰
```
ç”¨æˆ· â†’ NPXåŒ… â†’ æœ¬åœ°Pythonè¿›ç¨‹ â†’ FastMCP(stdio) â†’ Claude Desktop
```

### ç›®æ ‡æ¶æ„ï¼ˆäº‘æœåŠ¡å™¨æ–¹æ¡ˆï¼‰
```
ç”¨æˆ· â†’ Claude Desktop â†’ ç½‘ç»œè¯·æ±‚ â†’ äº‘ç«¯REST API â†’ Node.js MCPæœåŠ¡å™¨ â†’ OHå¡é€»è¾‘
```

## ğŸ“¦ é¡¹ç›®ç»“æ„è§„åˆ’

```
cloud-server/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ index.js           # ä¸»å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ server.js          # MCPæœåŠ¡å™¨å®ç°
â”‚   â”œâ”€â”€ ohcard/            # OHå¡ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ cards.js       # å¡ç‰Œæ•°æ®
â”‚   â”‚   â”œâ”€â”€ questions.js   # å¼•å¯¼é—®é¢˜
â”‚   â”‚   â””â”€â”€ tools.js       # å·¥å…·å‡½æ•°å®ç°
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”œâ”€â”€ tests/                 # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”œâ”€â”€ package.json           # NPMé…ç½®
â”œâ”€â”€ Dockerfile             # å®¹å™¨åŒ–é…ç½®
â”œâ”€â”€ chatmcp.yaml           # MCP.soé…ç½®æ–‡ä»¶
â”œâ”€â”€ docker-compose.yml     # æœ¬åœ°æµ‹è¯•é…ç½®
â”œâ”€â”€ .dockerignore          # Dockerå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ .gitignore            # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ readme_cloud.md       # æœ¬æ–‡ä»¶
â””â”€â”€ todo.md               # å¼€å‘ä»»åŠ¡æ¸…å•
```

## ğŸ”„ æ ¸å¿ƒæ”¹é€ ç‚¹

### 1. åè®®è½¬æ¢
- **ä»**ï¼šstdio é€šä¿¡åè®®
- **åˆ°**ï¼šREST API HTTPåè®®

### 2. æŠ€æœ¯æ ˆè½¬æ¢
- **ä»**ï¼šPython + FastMCP
- **åˆ°**ï¼šNode.js + @chatmcp/sdk

### 3. éƒ¨ç½²æ–¹å¼è½¬æ¢
- **ä»**ï¼šæœ¬åœ°è¿›ç¨‹
- **åˆ°**ï¼šäº‘ç«¯å®¹å™¨

### 4. å‚æ•°ä¼ é€’è½¬æ¢
- **ä»**ï¼šç¯å¢ƒå˜é‡
- **åˆ°**ï¼šåŠ¨æ€å‚æ•°è·å–

## ğŸš€ å…³é”®ç‰¹æ€§

### å¿…éœ€ç‰¹æ€§ï¼ˆMCP.soè¦æ±‚ï¼‰
- âœ… å¼€æºä¸”å•†ä¸šå‹å¥½è®¸å¯è¯ï¼ˆMITï¼‰
- âœ… ä¸è¯»å–æœ¬åœ°æ•°æ®
- âœ… æ”¯æŒstdioä¼ è¾“ï¼ˆå‘åå…¼å®¹ï¼‰
- âœ… æ”¯æŒRESTä¼ è¾“ï¼ˆäº‘ç«¯éƒ¨ç½²ï¼‰
- âœ… å®¹å™¨åŒ–éƒ¨ç½²æ”¯æŒ

### å¢å¼ºç‰¹æ€§
- ğŸ” å¥åº·æ£€æŸ¥ç«¯ç‚¹
- ğŸ“Š ç›‘æ§å’Œæ—¥å¿—
- ğŸ”’ åŸºæœ¬çš„è®¿é—®æ§åˆ¶
- âš¡ æ€§èƒ½ä¼˜åŒ–
- ğŸ”„ ä¼˜é›…å…³é—­

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒè¦æ±‚

### æœ¬åœ°å¼€å‘
- Node.js >= 18.0.0
- NPM >= 9.0.0
- Docker >= 20.0.0
- Git

### äº‘ç«¯éƒ¨ç½²
- æ”¯æŒNode.jså®¹å™¨çš„äº‘å¹³å°
- æ”¯æŒHTTP/HTTPSè®¿é—®
- æ”¯æŒç¯å¢ƒå˜é‡é…ç½®

## ğŸ“‹ åŠŸèƒ½æ˜ å°„

| NPXæ–¹æ¡ˆåŠŸèƒ½ | äº‘æœåŠ¡å™¨æ–¹æ¡ˆ | çŠ¶æ€ |
|------------|-------------|------|
| `what_is_oh_cards` | REST: `/tools/what_is_oh_cards` | ğŸ“‹ å¾…å¼€å‘ |
| `get_oh_card_process` | REST: `/tools/get_oh_card_process` | ğŸ“‹ å¾…å¼€å‘ |
| `draw_oh_card` | REST: `/tools/draw_oh_card` | ğŸ“‹ å¾…å¼€å‘ |
| `get_guidance_questions` | REST: `/tools/get_guidance_questions` | ğŸ“‹ å¾…å¼€å‘ |
| `get_all_question_types` | REST: `/tools/get_all_question_types` | ğŸ“‹ å¾…å¼€å‘ |
| `get_all_cards_preview` | REST: `/tools/get_all_cards_preview` | ğŸ“‹ å¾…å¼€å‘ |

## ğŸ¯ é‡Œç¨‹ç¢‘è§„åˆ’

è¯¦è§ [todo.md](./todo.md) æ–‡ä»¶ä¸­çš„è¯¦ç»†é‡Œç¨‹ç¢‘è§„åˆ’ã€‚

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
- æ¯ä¸ªå·¥å…·å‡½æ•°çš„å•ç‹¬æµ‹è¯•
- å‚æ•°éªŒè¯æµ‹è¯•
- é”™è¯¯å¤„ç†æµ‹è¯•

### é›†æˆæµ‹è¯•
- REST APIç«¯åˆ°ç«¯æµ‹è¯•
- MCPåè®®å…¼å®¹æ€§æµ‹è¯•
- Dockerå®¹å™¨æµ‹è¯•

### æ€§èƒ½æµ‹è¯•
- å¹¶å‘è®¿é—®æµ‹è¯•
- å“åº”æ—¶é—´æµ‹è¯•
- å†…å­˜ä½¿ç”¨æµ‹è¯•

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ

### å¼€å‘ç¯å¢ƒ
```bash
npm install
npm run dev
```

### æœ¬åœ°å®¹å™¨æµ‹è¯•
```bash
docker-compose up --build
```

### äº‘ç«¯éƒ¨ç½²
```bash
docker build -t ohcard-mcp .
docker run -p 9593:9593 ohcard-mcp
```

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

### åŸºç¡€æŒ‡æ ‡
- è¯·æ±‚æ•°é‡å’Œå“åº”æ—¶é—´
- é”™è¯¯ç‡å’ŒæˆåŠŸç‡
- å†…å­˜å’ŒCPUä½¿ç”¨ç‡

### ä¸šåŠ¡æŒ‡æ ‡
- æŠ½å¡æ¬¡æ•°ç»Ÿè®¡
- çƒ­é—¨é—®é¢˜ç±»å‹
- ç”¨æˆ·æ´»è·ƒåº¦

## ğŸ”’ å®‰å…¨è€ƒè™‘

### åŸºæœ¬å®‰å…¨
- è¾“å…¥å‚æ•°éªŒè¯
- è¾“å‡ºæ•°æ®æ¸…æ´—
- åŸºæœ¬çš„è®¿é—®é¢‘ç‡é™åˆ¶

### é«˜çº§å®‰å…¨ï¼ˆå¯é€‰ï¼‰
- APIå¯†é’¥è®¤è¯
- HTTPSå¼ºåˆ¶
- è¯·æ±‚ç­¾åéªŒè¯

## ğŸ“š APIæ–‡æ¡£

### å¥åº·æ£€æŸ¥
```
GET /health
Response: {"status": "ok", "timestamp": "2024-01-01T00:00:00Z"}
```

### MCPå·¥å…·è°ƒç”¨
```
POST /tools/draw_oh_card
Content-Type: application/json

{
  "arguments": {
    "intention": "æˆ‘æƒ³æ¢ç´¢å†…å¿ƒçš„å£°éŸ³"
  }
}
```

## ğŸ¤ å…¼å®¹æ€§

### MCPå®¢æˆ·ç«¯å…¼å®¹
- Claude Desktop
- å…¶ä»–æ ‡å‡†MCPå®¢æˆ·ç«¯

### å‘åå…¼å®¹
- ä¿æŒåŸæœ‰NPXæ–¹æ¡ˆä¸å˜
- æ”¯æŒstdioæ¨¡å¼ï¼ˆæœ¬åœ°å¼€å‘ï¼‰

## ğŸ“ é…ç½®ç¤ºä¾‹

### Claude Desktopé…ç½®ï¼ˆäº‘ç«¯æ¨¡å¼ï¼‰
```json
{
  "mcpServers": {
    "ohcard-cloud": {
      "command": "npx",
      "args": ["-y", "@cosmowind/ohcard-mcp-cloud"]
    }
  }
}
```

### ç¯å¢ƒå˜é‡é…ç½®
```bash
NODE_ENV=production
PORT=9593
LOG_LEVEL=info
```

## ğŸ”— ç›¸å…³é“¾æ¥

- [MCP.so æ‰˜ç®¡å¹³å°](https://mcp.so)
- [@chatmcp/sdk æ–‡æ¡£](https://github.com/chatmcp/sdk)
- [Docker å®˜æ–¹æ–‡æ¡£](https://docs.docker.com)
- [Node.js å®˜æ–¹æ–‡æ¡£](https://nodejs.org)

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. [todo.md](./todo.md) - å¼€å‘ä»»åŠ¡å’Œè¿›åº¦
2. [æµ‹è¯•æ–‡æ¡£](./tests/README.md) - æµ‹è¯•ç›¸å…³è¯´æ˜
3. [éƒ¨ç½²æ–‡æ¡£](./docs/deployment.md) - éƒ¨ç½²ç›¸å…³è¯´æ˜

**å¼€å‘åŸåˆ™**ï¼šæ¸è¿›å¼æ”¹é€ ï¼Œä¿æŒåŠŸèƒ½å®Œæ•´æ€§ï¼Œç¡®ä¿å‘åå…¼å®¹ã€‚ 